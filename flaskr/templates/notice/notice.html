<!DOCTYPE html>


<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>공지 | KHHSLINK</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/notice.css') }}">
  <script src="{{ url_for('static', filename='notice.js') }}" defer></script>
</head>
<body>

   <!--  상단 헤더 -->
   <header class="header">
    <div class="header-left">
      <a herf="mypage/mypage" class="mypage">
        <img src="profile-icon.png" alt="마이페이지" class="profile-icon" />
      </a>
    </div>

    <h1 class="header-title">공지</h1>

    <div class="header-right">
      <a href="mypage/mypage">
        <img src="mypage.png" alt="마이페이지" class="mypage-icon">
      </a>
    </div>
  </header>


  <!-- 본문 -->
  <main class="notice-body">
    <!-- 검색 영역 -->
    <div class="search-section">
      <input type="text" placeholder="검색어를 입력하세요" class="search-input" />
      <select class="search-filter">
        <option value="all">전체</option>
        <option value="title">제목</option>
        <option value="teacher">선생님</option>
      </select>
    </div>

    <!-- 공지 / 신청 구분 탭 -->
  <div class="notice-tabs">
        <!-- <<a href="{{url_for('notice',type='notice')}}"> -->
        <button class="tab-btn {% if selected_type == 'notice' %}active{% endif %}"
          onclick="updateQueryParam('type','notice')">공지글</button>
        <!-- </a> -->
        <!-- <a href="{{url_for('notice',type='all')}}"> -->
        <button class="tab-btn {% if selected_type == 'all' %}active{% endif %}"
          onclick="updateQueryParam('type','all')">전체</button>
        <!-- </a> -->
        <!-- <a href="{{url_for('notice',type='submit')}}"> -->
        <button class="tab-btn {% if selected_type == 'submit' %}active{% endif %}"
          onclick="updateQueryParam('type','submit')">신청글</button>

        <button class="tab-btn {% if selected_type == 'end' %}active{% endif %}"
          onclick="updateQueryParam('type','end')">마감</button>
        <!-- </a> -->
  </div>
  
  <script>
  /**
   * 원하는 쿼리 파라미터만 바꾸고 나머지는 유지
   * @param {string} key - 바꾸고 싶은 파라미터 이름
   * @param {string|number} value - 바꾸고 싶은 값
   */
  function updateQueryParam(key, value) {
      const url = new URL(window.location.href);
      url.searchParams.set(key, value); // key에 해당하는 값만 변경
      window.location.href = url.toString(); // 페이지 reload
  }
  </script>

  <!-- 공지 목록 -->
  <section class="notice-list">
    {% for post in posts %}
      <a href="{{ post.link }}" class="notice-item" target="_blank">
        <h3 class="notice-title">{{ post.title }}</h3>
        <p class="notice-meta">{{ post.teacher }} 선생님 · {{ post.date }}</p>
      </a>
    {% endfor %}
  </section> 

  <div class="pagination">
    <button onclick="setPage(1)">1</button>
    <button onclick="setPage(2)">2</button>
    <button onclick="setPage(3)">3</button>
    <button onclick="setPage(4)">4</button>
    <button onclick="setPage(5)">5</button>
    <button onclick="setPage(6)">6</button>
    <button onclick="setPage(7)">7</button>
    <button onclick="setPage(8)">8</button>
    <button onclick="setPage(9)">9</button>
    <button onclick="setPage(10)">10</button>
  </div>

  <script>
  function setPage(page) {
      const params = new URLSearchParams(window.location.search);
      params.set('page', page);  // page 인자 변경
      window.location.search = params.toString(); // 페이지 reload
  }
  </script>
 <!--하단 네비게이션-->
 <nav class="bottom-nav">
  <a href="home/home" class="nav-item">
    <span>홈</span>
  </a>

  <a href="notice/notice" class="nav-item active">
    <span>공지</span>
  </a>

  <a href="alert/alert" class="nav-item">
    <span>알림</span>
  </a>

  <a href="task/task" class="nav-item">
    <span>수행</span>
  </a>

  <a href="study/study" class="nav-item">
    <span>학습</span>
  </a>
</nav>

</body>
</html>
